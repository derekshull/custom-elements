<template id="x-foo-from-template">
  	<style>
		p { color: orange; }
  	</style>
  	<p>I'm in Shadow DOM. My markup was stamped from a &lt;template&gt;.</p>
</template>

<script>
	//document._currentScript = document._currentScript || document.currentScript;
	var importDoc = document._currentScript.ownerDocument;
  	customElements.define('x-foo-from-template', class extends HTMLElement {
		constructor() {
	  		super(); // always call super() first in the ctor.
	  		let shadowRoot = this.attachShadow({mode: 'open'});
	  		const t = importDoc.querySelector('#x-foo-from-template');
	  		const instance = t.content.cloneNode(true);
	  		shadowRoot.appendChild(instance);
		}
  	});
</script>